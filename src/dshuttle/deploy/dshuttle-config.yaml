# Copyright (c) Microsoft Corporation
# All rights reserved.
#
# MIT License
#
# Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
# documentation files (the "Software"), to deal in the Software without restriction, including without limitation
# the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and
# to permit persons to whom the Software is furnished to do so, subject to the following conditions:
# The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING
# BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
# DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

kind: ConfigMap
apiVersion: v1
metadata:
  name: dshuttle-config
data:
  ALLUXIO_JAVA_OPTS: |-
    -Dalluxio.master.hostname=dshuttle-master.default -Dalluxio.master.journal.type=UFS -Dalluxio.master.journal.folder=/journal -Dalluxio.master.mount.table.root.ufs=/opt/alluxio/underFSStorage -Dalluxio.security.stale.channel.purge.interval=365d -Dalluxio.user.metrics.collection.enabled=true -Dalluxio.user.block.size.bytes.default=32MB -Dalluxio.user.ufs.block.read.location.policy=alluxio.client.block.policy.MostAvailableFirstPolicy -Dalluxio.user.file.passive.cache.enabled=false -Dalluxio.security.authentication.type=NOSASL -Dalluxio.security.authorization.permission.enabled=false -Dalluxio.user.block.write.location.policy.class=alluxio.client.block.policy.MostAvailableFirstPolicy -Dalluxio.worker.rpc.port=4999 -Dalluxio.worker.web.port=5000 -Dalluxio.user.file.readtype.default=CACHE -Dalluxio.user.network.reader.chunk.size.bytes=128KB -Dalluxio.user.local.reader.chunk.size.bytes=256KB -Dalluxio.user.filesystem.class=alluxio.client.file.CachingFileSystem -Dalluxio.user.short.circuit.preferred=true -Dalluxio.user.block.worker.client.pool.min=32 
  ALLUXIO_MASTER_JAVA_OPTS: |-
    -Dalluxio.master.web.bind.host=0.0.0.0 
  ALLUXIO_JOB_MASTER_JAVA_OPTS: |-
    -Dalluxio.job.master.bind.host=0.0.0.0 
  ALLUXIO_WORKER_JAVA_OPTS: |-
    -Dalluxio.worker.bind.host=0.0.0.0  -Dalluxio.worker.data.server.domain.socket.address=/opt/domain -Dalluxio.worker.data.server.domain.socket.as.uuid=true -Dalluxio.worker.memory.size=2G -Dalluxio.worker.rpc.port=4999 -Dalluxio.worker.web.port=5000 -Dalluxio.worker.hostname=${ALLUXIO_WORKER_HOSTNAME} -Dalluxio.worker.tieredstore.levels=2 -Dalluxio.worker.tieredstore.level0.dirs.mediumtype=MEM -Dalluxio.worker.tieredstore.level0.alias=MEM -Dalluxio.worker.tieredstore.level0.dirs.path=/dev/shm -Dalluxio.worker.tieredstore.level0.dirs.quota=1G -Dalluxio.worker.tieredstore.level0.watermark.high.ratio=0.95 -Dalluxio.worker.tieredstore.level0.watermark.low.ratio=0.7 -Dalluxio.worker.tieredstore.level1.dirs.mediumtype=SSD -Dalluxio.worker.tieredstore.level1.dirs.path=/mnt/ssd -Dalluxio.worker.tieredstore.level1.dirs.quota=100G -Dalluxio.worker.tieredstore.level1.watermark.high.ratio=0.95 -Dalluxio.worker.tieredstore.level1.watermark.low.ratio=0.7 -Dalluxio.worker.tieredstore.level1.alias=SSD -Xmx2g -XX:MaxDirectMemorySize=2g  
  ALLUXIO_JOB_WORKER_JAVA_OPTS: |-
    -Dalluxio.job.worker.rpc.port=5001  -Dalluxio.job.worker.data.port=5002 -Dalluxio.job.worker.web.port=5003 -Dalluxio.worker.hostname=${ALLUXIO_WORKER_HOSTNAME} 
  ALLUXIO_FUSE_JAVA_OPTS: |-
    -Dalluxio.user.hostname=${ALLUXIO_CLIENT_HOSTNAME} -Dalluxio.worker.hostname=${ALLUXIO_CLIENT_HOSTNAME}  -XX:MaxDirectMemorySize=2g 
  ALLUXIO_WORKER_TIEREDSTORE_LEVEL0_DIRS_PATH: /dev/shm
